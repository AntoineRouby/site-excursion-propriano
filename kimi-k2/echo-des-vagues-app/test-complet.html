<!DOCTYPE html^>^<html^>^<head^>^<title^>üåä √âcho des Vagues - Test Complet^</title^>^<meta charset="utf-8"^>^<meta name="viewport" content="width=device-width, initial-scale=1"^>^<style^>*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Segoe UI',Arial,sans-serif;background:linear-gradient(135deg,#0077b6 0%,#00b4d8 100%);min-height:100vh;color:#fff;padding:20px}.container{max-width:1200px;margin:0 auto}.header{text-align:center;margin-bottom:30px}.header h1{font-size:2.5rem;margin-bottom:10px}.header p{font-size:1.1rem;opacity:0.9}.test-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:20px;margin-bottom:30px}.test-card{background:rgba(255,255,255,0.95);color:#333;padding:25px;border-radius:15px;box-shadow:0 10px 30px rgba(0,0,0,0.2);transition:transform 0.3s}.test-card:hover{transform:translateY(-5px)}.test-card h3{color:#0077b6;margin-bottom:15px;font-size:1.3rem}.btn{background:#0077b6;color:white;border:none;padding:12px 24px;border-radius:8px;cursor:pointer;font-size:14px;transition:background 0.3s;margin:5px 5px 5px 0}.btn:hover{background:#005f99}.btn-success{background:#28a745}.btn-danger{background:#dc3545}.form-group{margin-bottom:15px}.form-group label{display:block;margin-bottom:5px;font-weight:bold;color:#555}.form-group input,.form-group select{width:100%;padding:10px;border:2px solid #ddd;border-radius:5px;font-size:14px}.form-group input:focus,.form-group select:focus{border-color:#0077b7;outline:none}.result{background:#f8f9fa;border-left:4px solid #0077b6;padding:15px;margin-top:15px;border-radius:5px;font-family:'Courier New',monospace;font-size:12px;white-space:pre-wrap;max-height:300px;overflow-y:auto}.error{border-left-color:#dc3545;background:#f8d7da;color:#721c24}.success{border-left-color:#28a745;background:#d4edda;color:#155724}.stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:15px;margin:20px 0}.stat-card{background:rgba(255,255,255,0.9);padding:15px;border-radius:10px;text-align:center}.stat-value{font-size:2rem;font-weight:bold;color:#0077b6}.stat-label{color:#666;font-size:0.9rem}.reservation-item{background:#f8f9fa;padding:10px;margin:5px 0;border-radius:5px;border-left:4px solid #0077b6}.excursion-card{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;padding:20px;margin:10px 0;border-radius:10px;box-shadow:0 5px 15px rgba(0,0,0,0.2)}.excursion-title{font-size:1.2rem;font-weight:bold;margin-bottom:5px}.excursion-price{font-size:1.5rem;color:#ffd700}.excursion-duration{opacity:0.9}.loading{text-align:center;padding:20px;color:#666}.no-data{text-align:center;padding:20px;color:#999;font-style:italic}^</style^>^</head^>^<body^>^<div class="container"^>^<div class="header"^>^<h1^>üåä √âcho des Vagues - Test Complet^</h1^>^<p^>Interface de test pour toutes les fonctionnalit√©s^</p^>^</div^>^<div class="test-grid"^>^<div class="test-card"^>^<h3^>üìã Excursions Disponibles^</h3^>^<button class="btn" onclick="loadExcursions()"^>Charger les excursions^</button^>^<button class="btn" onclick="clearExcursions()"^>Effacer^</button^>^<div id="excursions-container"^>^<div class="loading"^>Cliquez sur "Charger" pour voir les excursions^</div^>^</div^>^</div^>^<div class="test-card"^>^<h3^>üìä Statistiques^</h3^>^<button class="btn" onclick="loadStats()"^>Actualiser stats^</button^>^<div id="stats-container"^>^<div class="stats-grid" id="stats-display"^>^</div^>^<div id="stats-detail" class="result" style="display:none;"^>^</div^>^</div^>^</div^>^<div class="test-card"^>^<h3^>üìÖ Cr√©er une R√©servation^</h3^>^<div class="form-group"^>^<label^>Excursion :^</label^>^<select id="reservation-excursion"^>^<option value=""^>Choisir une excursion...^</option^>^</select^>^</div^>^<div class="form-group"^>^<label^>Nom du client :^</label^>^<input type="text" id="reservation-name" placeholder="Jean Dupont"^>^</div^>^<div class="form-group"^>^<label^>Email :^</label^>^<input type="email" id="reservation-email" placeholder="jean@example.com"^>^</div^>^<div class="form-group"^>^<label^>Date de r√©servation :^</label^>^<input type="date" id="reservation-date"^>^</div^>^<div class="form-group"^>^<label^>Nombre de personnes :^</label^>^<select id="reservation-people"^>^<option value="1"^>1 personne^</option^>^<option value="2"^>2 personnes^</option^>^<option value="3"^>3 personnes^</option^>^<option value="4"^>4 personnes^</option^>^<option value="5"^>5 personnes^</option^>^<option value="6"^>6 personnes^</option^>^</select^>^</div^>^<button class="btn btn-success" onclick="createReservation()"^>Cr√©er la r√©servation^</button^>^<button class="btn btn-danger" onclick="clearReservationForm()"^>Effacer^</button^>^<div id="reservation-result" class="result" style="display:none;"^>^</div^>^</div^>^<div class="test-card"^>^<h3^>üìã R√©servations R√©centes^</h3^>^<button class="btn" onclick="loadReservations()"^>Charger les r√©servations^</button^>^<button class="btn" onclick="clearReservations()"^>Effacer^</button^>^<div id="reservations-list"^>^<div class="no-data"^>Aucune r√©servation √† afficher^</div^>^</div^>^</div^>^</div^>^<div style="text-align:center;margin-top:30px"^>^<button class="btn" onclick="runAllTests()"^>üöÄ Lancer tous les tests^</button^>^<button class="btn" onclick="clearAllResults()"^>üóëÔ∏è Tout effacer^</button^>^</div^>^</div^>^<script^>let excursionsCache=[];let statsCache=null;let reservationsCache=[];function showResult(elementId,text,isError=false){const element=document.getElementById(elementId);element.style.display='block';element.className='result'+(isError?' error':' success');element.textContent=typeof text==='object'?JSON.stringify(text,null,2):text;}function showError(elementId,text){showResult(elementId,text,true);}async function loadExcursions(){const container=document.getElementById('excursions-container');container.innerHTML='^<div class="loading"^>Chargement en cours...^</div^>';try{const response=await fetch('http://localhost:5000/api/excursions');if(!response.ok)throw new Error('Erreur '+response.status);const data=await response.json();excursionsCache=data;if(data.length===0){container.innerHTML='^<div class="no-data"^>Aucune excursion disponible^</div^>';return;}container.innerHTML=data.map(exc=^>`^<div class="excursion-card"^>^<div class="excursion-title"^>${exc.name}^</div^>^<div class="excursion-price"^>${exc.price}‚Ç¨ par personne^</div^>^<div class="excursion-duration"^>Dur√©e: ${exc.duration}^</div^>^<div style="margin-top:10px;opacity:0.9"^>${exc.description}^</div^>^</div^>`).join('');showResult('excursions-result','‚úÖ '+data.length+' excursions charg√©es');}catch(error){showError('excursions-result','Erreur lors du chargement: '+error.message);}}function clearExcursions(){document.getElementById('excursions-container').innerHTML='^<div class="no-data"^>Cliquez sur "Charger" pour voir les excursions^</div^>';document.getElementById('excursions-result').style.display='none';}async function loadStats(){const container=document.getElementById('stats-container');container.innerHTML='^<div class="loading"^>Chargement des statistiques...^</div^>';try{const response=await fetch('http://localhost:5000/api/stats');if(!response.ok)throw new Error('Erreur '+response.status);const data=await response.json();statsCache=data;document.getElementById('stats-display').innerHTML=`^<div class="stat-card"^>^<div class="stat-value"^>${data.total_reservations}^</div^>^<div class="stat-label"^>Total R√©servations^</div^>^</div^>^<div class="stat-card"^>^<div class="stat-value"^>${data.total_revenue}‚Ç¨^</div^>^<div class="stat-label"^>Revenu Total^</div^>^</div^>`;showResult('stats-detail','‚úÖ Statistiques charg√©es\\n\\nD√©tails:\\n- Nombre total de r√©servations: '+data.total_reservations+'\\n- Revenu total: '+data.total_revenue+'‚Ç¨');}catch(error){showError('stats-detail','Erreur lors du chargement des statistiques: '+error.message);}}function clearStats(){document.getElementById('stats-display').innerHTML='';document.getElementById('stats-detail').style.display='none';}async function createReservation(){const excursionId=document.getElementById('reservation-excursion').value;const name=document.getElementById('reservation-name').value;const email=document.getElementById('reservation-email').value;const date=document.getElementById('reservation-date').value;const people=document.getElementById('reservation-people').value;if(!excursionId||!name||!email||!date||!people){alert('Veuillez remplir tous les champs');return;}const resultContainer=document.getElementById('reservation-result');resultContainer.innerHTML='^<div class="loading"^>Cr√©ation de la r√©servation en cours...^</div^>';resultContainer.style.display='block';try{const response=await fetch('http://localhost:5000/api/reservations',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({excursion_id:parseInt(excursionId),name:name,email:email,date:date,number_of_people:parseInt(people)})});if(!response.ok)throw new Error('Erreur '+response.status);const data=await response.json();showResult('reservation-result','‚úÖ R√©servation cr√©√©e avec succ√®s!\\n\\nD√©tails:\\n- Num√©ro: '+data.reservation_number+'\\n- Total: '+data.total_amount+'‚Ç¨\\n- Client: '+name+'\\n- Email: '+email+'\\n- Date: '+date+'\\n- Personnes: '+people);loadStats();loadReservations();}catch(error){showError('reservation-result','Erreur lors de la cr√©ation: '+error.message);}}function clearReservationForm(){document.getElementById('reservation-excursion').value='';document.getElementById('reservation-name').value='';document.getElementById('reservation-email').value='';document.getElementById('reservation-date').value='';document.getElementById('reservation-people').value='1';document.getElementById('reservation-result').style.display='none';}async function loadReservations(){const container=document.getElementById('reservations-list');container.innerHTML='^<div class="loading"^>Chargement des r√©servations...^</div^>';try{const response=await fetch('http://localhost:5000/api/reservations');if(!response.ok)throw new Error('Erreur '+response.status);const data=await response.json();reservationsCache=data;if(data.length===0){container.innerHTML='^<div class="no-data"^>Aucune r√©servation trouv√©e^</div^>';return;}container.innerHTML=data.map(res=^>`^<div class="reservation-item"^>^<strong^>${res.reservation_number}^</strong^> - ${res.client_name} (${res.client_email})^<br^>Excursion: ${res.excursion_name || 'Inconnue'}^<br^>Date: ${res.reservation_date} - ${res.number_of_people} personne(s)^<br^>Total: ${res.total_amount}‚Ç¨^</div^>`).join('');showResult('reservations-result','‚úÖ '+data.length+' r√©servations charg√©es');}catch(error){showError('reservations-result','Erreur lors du chargement: '+error.message);}}function clearReservations(){document.getElementById('reservations-list').innerHTML='^<div class="no-data"^>Aucune r√©servation √† afficher^</div^>';document.getElementById('reservations-result').style.display='none';}async function runAllTests(){console.log('üöÄ Lancement de tous les tests...');await loadExcursions();await loadStats();await loadReservations();console.log('‚úÖ Tous les tests termin√©s');}function clearAllResults(){clearExcursions();clearStats();clearReservationForm();clearReservations();document.querySelectorAll('.result').forEach(el=^>el.style.display='none');}// Initialisation au chargement de la pagedocument.addEventListener('DOMContentLoaded',function(){console.log('üåä Page de test charg√©e');// D√©finir la date par d√©faut √† demainconst tomorrow=new Date();tomorrow.setDate(tomorrow.getDate()+1);document.getElementById('reservation-date').value=tomorrow.toISOString().split('T')[0];// Charger les donn√©es initialesloadExcursions();loadStats();});^</script^>^</body^>^</html^>